# Boot

Boot は16bitで行って、

```
MOVW = 0x66 MOVW
```

でprotected 32 bit mdoeに移行している

# 80386

32 bit data and bus addresses

32bitのデータ領域とバスアドレス

# 8086

16 registers and 20-bit bus addresses

16のレジスターと20bit バスアドレス

Only 1024 I/O addresses

1024はIO用のアドレス　

```
static void
lpt_putc(int c)
{
	int i;

	for (i = 0; !(inb(0x378+1) & 0x80) && i < 12800; i++)
		delay();
	outb(0x378+0, c);
	outb(0x378+2, 0x08|0x04|0x01);
	outb(0x378+2, 0x08);
}
```

```
static inline void
outb(int port, uint8_t data)
{
	asm volatile("outb %0,%w1" : : "a" (data), "d" (port));
}
```

# outbとinb

outb(unsigned char value, int port)
  ポート番号 port に 1 バイトの value を出力する

unsigned char inb(int port)
  ポート番号 port から 1 バイトの value を入力してその値を返す

# I/O port

I/Oポートとは、コンピュータ内部でCPUと周辺機器が通信を行うための窓口となる端子や回路のこと。シリアルポートなどの接続端子ごとに用意され、CPUから接続先の機器やICチップを制御し、データの送受信を行なうことができる。

各ポートにはそれぞれ固有のI/Oポートアドレスが割り当てられ、CPUは制御したいポートのアドレスを指定してデータの読み書きを行うことで命令の送信や受信データの受け取りなどを行なうことができる。パソコンのように多数のI/Oが内蔵された機器の場合は、RS-232C、キーボード、USB、IDE、VGA、PCIなど機器や接続端子ごとにI/Oポートが用意される。

標準的なパソコン製品に多いPC/AT互換機では通常0000h～FFFFhの64KBのアドレス空間が用いられるが、0000h～00FFhの空間はマザーボード上のチップセットなどのためにシステム側が予約しており、周辺機器はこれ以外のアドレスを利用することになる。

複数の機器が同じアドレスを設定してしまうと正常に動作しないため、かつては拡張カードを接続する際に既存の機器と重複しないよう利用者がI/Oポートアドレスを入力することもあった。現在ではプラグアンドプレイのような自動化の仕組みが整備され、利用者が意識することはほとんどなくなった。

# Protected mode

プロテクトモードとは、80286以降のx86アーキテクチャのCPUモードの一つ。正式名称は Protected Virtual Address Mode（保護仮想アドレスモード）である[1]。メモリやI/Oの保護を行うと共に、アドレス空間の拡張を行ったモードである。このモードでは仮想記憶、ページング、安全なマルチタスクといった機能をシステムソフトウェアが使えるようになり、アプリケーションソフトウェアへのオペレーティングシステム (OS) の制御能力が向上するよう設計されている

# アセンプラメモ

• Instructions classes:
– Data movement: MOV, PUSH, POP, …
– Arithmetic: TEST, SHL, ADD, …
– I/O: IN, OUT, …
– Control: JMP, JZ, JNZ, CALL, RET
– String: REP, MOVSB, …
– System: IRET, INT, …
• Intel architecture manual Volume 2
– Intel syntax: op dst, src
– AT&T (gcc/gas) syntax: op src, dst

# built in function (ビルトイン関数)

ビルトイン関数とは、プログラミング言語などにおける関数のうち、基本的・汎用的な演算処理を行うためにあらあかじめ用意されている関数のことである。

ビルトイン関数は、特定の機能に依存しない標準的な仕様として提供されている。ビルトイン関数が用意されていることにより、標準的な演算処理を特に定義することなく利用することが可能となるため、アプリケーション開発の効率化などを図ることができる。

一般的なビルトイン関数の例として、PHPにおける日付や時刻の情報を取得するための関数や、FORTRANにおける文字列の絶対数を求めるための関数などを挙げることができる。なお、プログラミング言語によっては、「ビルトイン関数」に相当するものを他の名称で呼ぶ場合もある。例えばC言語ではライブラリ関数の呼び名が標準的に用いられている。

プログラミング言語の他に、Excelなどの表計算ソフトにおいて当初から提供されている関数も、ビルトイン関数と呼ばれている。例えばSUM関数などは多くの表計算ソフトにおいてビルトイン関数として用意されている。

# process プロセス

実行中のプログラムのイメージ。機械語のプログラムがメモリに読み込ま れて「プロセッサ(CPU)」の実行の対象になったもの。
資源割当の単位
資源として、CPU時間、メモリ、アドレス空間、レジスタ、開いたファイル等を持つ
CPU資源の割当ては、スケジューリングという。
保護の単位。他のプロセスのメモリは、直接的には見えない。 プロセスが暴走(runaway)しても、他のプロセスには影響を及ぼさない。 普通、暴走したプロセスを殺せば、回復する。システム全体の再起動は不要。
ファイル等のアクセス制御に用いる権限(利用者の識別子、利用者のグルー プの識別子)を持つ
プロセスの操作は、生成、終了、強制終了、プログラムの実行、一時停止、 再開、デバッグなど。
３つの基本的な状態を持つ

# thread スレッド

スレッドとは、１つのプロセス（のアドレス空間）の内部にふくまれている論 理的な並列処理の単位。

シングルスレッドのプログラム
１度に１つの手続き（Ｃの関数）しか動かない。
マルチスレッドのプログラム
１度にスレッドの数だけの手続きが論理的には同時に動く。 (同期でブロックされているものも含む)
スレッドはプロセスの機能のうち、保護の機能を抜いて高速化したもの。歴史 的には、SMP (Symmetric multiprocessor) での効率的な並列処理のために導入 された。同一プロセスに属するスレッドは、アドレス空間やメモリを共有する。 生成、消滅、スレッド間通信が高速に実現される。
